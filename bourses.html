<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø´ÙƒØ§ÙŠØ© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø­Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© 2025-2026</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
    body {
      font-family: 'Amiri', serif;
      background-color: #f0f0f5;
      width: 450px;
      margin: 10px auto;
      padding: 15px;
      border: 1px solid #999;
      border-radius: 10px;
      background: #ffffff;
      direction: rtl;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .header {
      text-align: center;
      margin-bottom: 10px;
      line-height: 1.4;
    }
    .header h1 { font-size: 12px; margin: 0; }
    .header h2 { font-size: 11px; margin: 0; }
    h3 {
      text-align: center;
      font-size: 14px;
      margin: 10px 0 15px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
      color: #1a252f;
    }
    label {
      display: block;
      margin: 5px 0 2px;
      font-weight: bold;
      font-size: 12px;
    }
    input, select {
      width: 100%;
      padding: 5px;
      font-size: 12px;
      margin-bottom: 10px;
      box-sizing: border-box;
    }
    .form-row {
      display: flex;
      gap: 10px;
      flex-wrap: nowrap;
      margin-bottom: 10px;
    }
    .form-group {
      flex: 1;
      min-width: 150px;
    }
    .form-footer {
      margin-top: 15px;
      display: flex;
      justify-content: center;
    }
    .submit-button {
      background-color: #3470af;
      color: white;
      padding: 10px 25px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      min-width: 150px;
      transition: background-color 0.3s ease;
    }
    .submit-button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø©</h1>
    <h2>Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¬Ù‡ÙˆÙŠØ© Ù„Ù„ØªØ±Ø¨ÙŠØ© ÙˆØ§Ù„ØªÙƒÙˆÙŠÙ†: Ù…Ø±Ø§ÙƒØ´ Ø¢Ø³ÙÙŠ</h2>
    <h2>Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©: Ø§Ù„ÙŠÙˆØ³ÙÙŠØ©</h2>
  </div>
  <h3>Ø´ÙƒØ§ÙŠØ© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø­Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©<br>Ù„Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 2025-2026</h3>
  <form id="complaintForm" novalidate>
    <h3 style="margin-top: 25px;">Ù…Ø¹Ø·ÙŠØ§Øª Ø§Ù„ØªÙ„Ù…ÙŠØ°(Ø©)</h3>
    <div class="form-row">
      <div class="form-group">
        <label for="studentFirstName">Ø§Ù„Ø§Ø³Ù…:</label>
        <input type="text" id="studentFirstName" name="studentFirstName" required />
      </div>
      <div class="form-group">
        <label for="studentLastName">Ø§Ù„Ù†Ø³Ø¨:</label>
        <input type="text" id="studentLastName" name="studentLastName" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="massar">Ø±Ù‚Ù… Ù…Ø³Ø§Ø±:</label>
        <input type="text" id="massar" name="massar" required pattern="[A-Za-z][0-9]{9}" placeholder="Ù…Ø«Ø§Ù„: G123456789" />
      </div>
      <div class="form-group">
        <label for="birthDatePlace">ØªØ§Ø±ÙŠØ® ÙˆÙ…ÙƒØ§Ù† Ø§Ù„Ø§Ø²Ø¯ÙŠØ§Ø¯:</label>
        <input type="text" id="birthDatePlace" name="birthDatePlace" required placeholder="Ù…Ø«Ø§Ù„: 01/01/2010 - Ø§Ù„ÙŠÙˆØ³ÙÙŠØ©" />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group" style="flex: 1 1 100%;">
        <label for="familyAddress">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠ:</label>
        <input type="text" id="familyAddress" name="familyAddress" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="originalSchool">Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©:</label>
        <input type="text" id="originalSchool" name="originalSchool" required />
      </div>
      <div class="form-group">
        <label for="originalCommune">Ø§Ù„Ø¬Ù…Ø§Ø¹Ø© (Ø§Ù„Ø£ØµÙ„ÙŠØ©):</label>
        <input type="text" id="originalCommune" name="originalCommune" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="receptionSchool">Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„:</label>
        <input type="text" id="receptionSchool" name="receptionSchool" required />
      </div>
      <div class="form-group">
        <label for="receptionCommune">Ø§Ù„Ø¬Ù…Ø§Ø¹Ø© (Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„):</label>
        <input type="text" id="receptionCommune" name="receptionCommune" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="distanceKm">Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙˆØ¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³ÙƒÙ† (ÙƒÙ…):</label>
        <input type="number" id="distanceKm" name="distanceKm" step="0.1" min="0" required />
      </div>
      <div class="form-group">
        <label for="civilSocialId">Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù„Ù„Ø£Ø³Ø±Ø©:</label>
        <input type="text" id="civilSocialId" name="civilSocialId" required placeholder="Ù…Ø«Ø§Ù„: 8.15" />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="healthStatus">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ©:</label>
        <select id="healthStatus" name="healthStatus" required>
          <option value="">-- Ø§Ø®ØªØ± --</option>
          <option value="Ø¹Ø§Ø¯ÙŠØ©">Ø­Ø§Ù„Ø© Ø¹Ø§Ø¯ÙŠØ©</option>
          <option value="Ø¥Ø¹Ø§Ù‚Ø©">ÙˆØ¬ÙˆØ¯ Ø¥Ø¹Ø§Ù‚Ø©</option>
          <option value="Ù…Ø±Ø¶ Ù…Ø²Ù…Ù†">Ù…Ø±Ø¶ Ù…Ø²Ù…Ù†</option>
        </select>
      </div>
      <div class="form-group">
        <label for="socialStatus">Ø§Ù„ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©:</label>
        <select id="socialStatus" name="socialStatus" required>
          <option value="">-- Ø§Ø®ØªØ± --</option>
          <option value="Ø¹Ø§Ø¯ÙŠØ©">ÙˆØ¶Ø¹ÙŠØ© Ø¹Ø§Ø¯ÙŠØ©</option>
          <option value="ÙŠØªÙŠÙ…">ÙŠØªÙŠÙ…</option>
          <option value="Ù…ØªØ®Ù„Ù‰ Ø¹Ù†Ù‡">Ù…ØªØ®Ù„Ù‰ Ø¹Ù†Ù‡</option>
          <option value="Ù…ÙƒÙÙˆÙ„ Ø§Ù„Ø£Ù…Ø©">Ù…ÙƒÙÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø©</option>
          <option value="Ø·Ù„Ø§Ù‚"> Ø·Ù„Ø§Ù‚</option>
          <option value=" Ø³Ø¬Ù† Ø£Ø­Ø¯ Ø§Ù„Ø£Ø¨ÙˆÙŠÙ†"> Ø³Ø¬Ù† Ø£Ø­Ø¯ Ø§Ù„Ø£Ø¨ÙˆÙŠÙ†</option>
        </select>
      </div>
    </div>

    <h3 style="margin-top: 25px;">Ù…Ø¹Ø·ÙŠØ§Øª ÙˆÙ„ÙŠ Ø§Ù„ØªÙ„Ù…ÙŠØ°(Ø©)</h3>

    <div class="form-row">
      <div class="form-group">
        <label for="guardianFirstName">Ø§Ù„Ø§Ø³Ù… (ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±):</label>
        <input type="text" id="guardianFirstName" name="guardianFirstName" required />
      </div>
      <div class="form-group">
        <label for="guardianLastName">Ø§Ù„Ù†Ø³Ø¨ (ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±):</label>
        <input type="text" id="guardianLastName" name="guardianLastName" required />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="guardianCNINumber">Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© (ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±):</label>
        <input type="text" id="guardianCNINumber" name="guardianCNINumber" required pattern="[A-Za-z]{2}[0-9]{6}" placeholder="Ù…Ø«Ø§Ù„: HA123456" />
      </div>
      <div class="form-group">
        <label for="guardianJob">Ø§Ù„Ù…Ù‡Ù†Ø©:</label>
        <input type="text" id="guardianJob" name="guardianJob" required />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="guardianPhone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
        <input type="tel" id="guardianPhone" name="guardianPhone" required pattern="0[0-9]{9}" placeholder="Ù…Ø«Ø§Ù„: 0612345678" />
      </div>
      <div class="form-group">
        <label for="spouseName">Ø§Ø³Ù… Ø§Ù„Ø²ÙˆØ¬(Ø©):</label>
        <input type="text" id="spouseName" name="spouseName" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="spouseLastName">Ù†Ø³Ø¨ Ø§Ù„Ø²ÙˆØ¬(Ø©):</label>
        <input type="text" id="spouseLastName" name="spouseLastName" />
      </div>
      <div class="form-group">
        <label for="spouseCNINumber">Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø²ÙˆØ¬(Ø©):</label>
        <input type="text" id="spouseCNINumber" name="spouseCNINumber" pattern="[A-Za-z]{2}[0-9]{6}" placeholder="Ù…Ø«Ø§Ù„: HA123456" />
      </div>
    </div>

    <div class="form-footer">
      <button type="submit" class="submit-button">ØªØ³Ø¬ÙŠÙ„ ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´ÙƒØ§ÙŠØ©</button>
    </div>
  </form>
<!-- Ø§Ø³ØªÙ…Ø§Ø±ØªÙƒ -->
<form id="grantForm">
  <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù‡Ù†Ø§ -->
</form>

<!-- Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ø³ÙÙ„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© -->
<div class="alert-box">
  <strong>ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©:</strong><br>
  ÙŠÙØ±ÙÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø³Ø®Ø© Ù…Ù† Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø§Ù„ØªÙ„Ù…ÙŠØ°(Ø©)ØŒ 
  ÙˆÙˆØ«ÙŠÙ‚Ø© ØªÙØ«Ø¨Øª Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù„Ù„Ø£Ø³Ø±Ø©ØŒ 
  Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ ÙˆØ«ÙŠÙ‚Ø© ØªØªØ¶Ù…Ù† Ø±Ù…Ø² Ù…Ø³Ø§Ø± Ø§Ù„ØªÙ„Ù…ÙŠØ°(Ø©).
</div>

<style>
.alert-box {
  direction: rtl;
  background-color: #fff8e1;
  border: 1px solid #ffc107;
  color: #795548;
  padding: 15px;
  border-radius: 8px;
  font-size: 16px;
  margin-top: 30px;
  margin-bottom: 40px;
  box-shadow: 0 0 10px rgba(0,0,0,0.05);
  line-height: 1.6;
}
</style>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBbM9-Bd_ct6nqGnRBsLp2M08ze9n4tLbo",
      authDomain: "bourses-b1948.firebaseapp.com",
      projectId: "bourses-b1948",
      storageBucket: "bourses-b1948.firebasestorage.app",
      messagingSenderId: "639203393196",
      appId: "1:639203393196:web:05aa16c19762053d18a909",
      measurementId: "G-7SNG6QZ000"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById('complaintForm');

    function printCard(data) {
      const printWindow = window.open('', '', 'width=450,height=700');
      const content = `
      <html lang="ar" dir="rtl">
      <head>
        <meta charset="UTF-8" />
        <title>Ø¨Ø·Ø§Ù‚Ø© Ø´ÙƒØ§ÙŠØ© Ø§Ù„Ù…Ù†Ø­Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</title>
        <style>
          @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
          body {
            font-family: 'Amiri', serif;
            direction: rtl;
            background: #fff;
            margin: 20px;
            padding: 10px;
            color: #333;
          }
          h1, h2 {
            text-align: center;
            margin: 0;
            padding: 2px 0;
            font-size: 8px; /* Ø­Ø¬Ù… Ø£ØµØºØ± */
            line-height: 1.1;
          }
          h3 {
            text-align: center;
            margin: 15px 0;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
          }
          table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 14px;
          }
          td {
            border: 1px solid #999;
            padding: 8px 10px;
            vertical-align: top;
          }
          td.label {
            width: 40%;
            background-color: #f0f0f5;
            font-weight: bold;
            text-align: right;
            direction: rtl;
          }
          td.value {
            width: 60%;
            text-align: right;
            direction: rtl;
          }
          .signature {
            margin-top: 40px;
            text-align: left;
            font-size: 14px;
          }

        
        </style>
      </head>
      <body>
        <h1>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø©</h1>
        <h2>Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¬Ù‡ÙˆÙŠØ© Ù„Ù„ØªØ±Ø¨ÙŠØ© ÙˆØ§Ù„ØªÙƒÙˆÙŠÙ†: Ù…Ø±Ø§ÙƒØ´ Ø¢Ø³ÙÙŠ</h2>
        <h2>Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©: Ø§Ù„ÙŠÙˆØ³ÙÙŠØ©</h2>
        <h3>Ø´ÙƒØ§ÙŠØ© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø­Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ù„Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 2025-2026</h3>

        <table>
  <tr><td class="label" colspan="2" style="background:#ddd; text-align:center; font-weight:bold;">Ù…Ø¹Ø·ÙŠØ§Øª Ø§Ù„ØªÙ„Ù…ÙŠØ°(Ø©)</td></tr>
  <tr><td class="label">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù†Ø³Ø¨ (Ø§Ù„ØªÙ„Ù…ÙŠØ°):</td><td class="value">${data.studentFirstName} ${data.studentLastName}</td></tr>
  <tr><td class="label">Ø±Ù‚Ù… Ù…Ø³Ø§Ø±:</td><td class="value">${data.massar}</td></tr>
  <tr><td class="label">ØªØ§Ø±ÙŠØ® ÙˆÙ…ÙƒØ§Ù† Ø§Ù„Ø§Ø²Ø¯ÙŠØ§Ø¯:</td><td class="value">${data.birthDatePlace}</td></tr>
  <tr><td class="label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠ:</td><td class="value">${data.familyAddress}</td></tr>
  <tr><td class="label">Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©:</td><td class="value">${data.originalSchool}</td></tr>
  <tr><td class="label">Ø§Ù„Ø¬Ù…Ø§Ø¹Ø© (Ø§Ù„Ø£ØµÙ„ÙŠØ©):</td><td class="value">${data.originalCommune}</td></tr>
  <tr><td class="label">Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„:</td><td class="value">${data.receptionSchool}</td></tr>
  <tr><td class="label">Ø§Ù„Ø¬Ù…Ø§Ø¹Ø© (Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„):</td><td class="value">${data.receptionCommune}</td></tr>
  <tr><td class="label">Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙˆØ¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³ÙƒÙ† (ÙƒÙ…):</td><td class="value">${data.distanceKm}</td></tr>
  <tr><td class="label">Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù„Ù„Ø£Ø³Ø±Ø©:</td><td class="value">${data.civilSocialId}</td></tr>
  <tr><td class="label">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ©:</td><td class="value">${data.healthStatus}</td></tr>
  <tr><td class="label">Ø§Ù„ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©:</td><td class="value">${data.socialStatus}</td></tr>

  <tr><td class="label" colspan="2" style="background:#ddd; text-align:center; font-weight:bold;">Ù…Ø¹Ø·ÙŠØ§Øª ÙˆÙ„ÙŠ Ø§Ù„ØªÙ„Ù…ÙŠØ°(Ø©)</td></tr>

  <tr><td class="label">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù†Ø³Ø¨ (ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±):</td><td class="value">${data.guardianFirstName} ${data.guardianLastName}</td></tr>
  <tr><td class="label">Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© (ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±):</td><td class="value">${data.guardianCNINumber}</td></tr>
  <tr><td class="label">Ø§Ù„Ù…Ù‡Ù†Ø©:</td><td class="value">${data.guardianJob}</td></tr>
  <tr><td class="label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</td><td class="value">${data.guardianPhone}</td></tr>
  <tr><td class="label">Ø§Ø³Ù… Ø§Ù„Ø²ÙˆØ¬(Ø©):</td><td class="value">${data.spouseName || '-'}</td></tr>
  <tr><td class="label">Ù†Ø³Ø¨ Ø§Ù„Ø²ÙˆØ¬(Ø©):</td><td class="value">${data.spouseLastName || '-'}</td></tr>
  <tr><td class="label">Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø²ÙˆØ¬(Ø©):</td><td class="value">${data.spouseCNINumber || '-'}</td></tr>
</table>
        <div class="signature">
          <div>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</div>
          <br><br>
        </div>
      </body>
      </html>
      `;

      printWindow.document.write(content);
      printWindow.document.close();

      setTimeout(() => {
        printWindow.focus();
        printWindow.print();
        printWindow.close();
      }, 500);
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const formData = {
        studentFirstName: form.studentFirstName.value.trim(),
        studentLastName: form.studentLastName.value.trim(),
        massar: form.massar.value.trim(),
        birthDatePlace: form.birthDatePlace.value.trim(),
        familyAddress: form.familyAddress.value.trim(),
        originalSchool: form.originalSchool.value.trim(),
        originalCommune: form.originalCommune.value.trim(),
        receptionSchool: form.receptionSchool.value.trim(),
        receptionCommune: form.receptionCommune.value.trim(),
        distanceKm: parseFloat(form.distanceKm.value),
        civilSocialId: form.civilSocialId.value.trim(),
        guardianFirstName: form.guardianFirstName.value.trim(),
        guardianLastName: form.guardianLastName.value.trim(),
        guardianCNINumber: form.guardianCNINumber.value.trim(),
        guardianJob: form.guardianJob.value.trim(),
        guardianPhone: form.guardianPhone.value.trim(),
        spouseName: form.spouseName.value.trim(),
        spouseLastName: form.spouseLastName.value.trim(),
        spouseCNINumber: form.spouseCNINumber.value.trim(),
        healthStatus: form.healthStatus.value,
        socialStatus: form.socialStatus.value,
        timestamp: new Date().toISOString()
      };

      try {
        await addDoc(collection(db, "scholarshipComplaints"), formData);
        alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø´ÙƒØ§ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!");

        printCard(formData);
        form.reset();

      } catch (error) {
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: " + error.message);
        console.error(error);
      }
    });
  </script>
</body>
</html>
