<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุดูุงูุฉ ุงูุญุตูู ุนูู ุงูููุญุฉ ุงูุฏุฑุงุณูุฉ 2025-2026</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
    body {
      font-family: 'Amiri', serif;
      background-color: #f0f0f5;
      width: 450px;
      margin: 10px auto;
      padding: 15px;
      border: 1px solid #999;
      border-radius: 10px;
      background: #ffffff;
      direction: rtl;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .header {
      text-align: center;
      margin-bottom: 10px;
      line-height: 1.4;
    }
    .header h1 { font-size: 12px; margin: 0; }
    .header h2 { font-size: 11px; margin: 0; }
    h3 {
      text-align: center;
      font-size: 14px;
      margin: 10px 0 15px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
      color: #1a252f;
    }
    label {
      display: block;
      margin: 5px 0 2px;
      font-weight: bold;
      font-size: 12px;
    }
    input, select {
      width: 100%;
      padding: 5px;
      font-size: 12px;
      margin-bottom: 10px;
      box-sizing: border-box;
    }
    .form-row {
      display: flex;
      gap: 10px;
      flex-wrap: nowrap;
      margin-bottom: 10px;
    }
    .form-group {
      flex: 1;
      min-width: 150px;
    }
    .form-footer {
      margin-top: 15px;
      display: flex;
      justify-content: center;
    }
    .submit-button {
      background-color: #3470af;
      color: white;
      padding: 10px 25px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      min-width: 150px;
      transition: background-color 0.3s ease;
    }
    .submit-button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ูุฒุงุฑุฉ ุงูุชุฑุจูุฉ ุงููุทููุฉ ูุงูุชุนููู ุงูุฃููู ูุงูุฑูุงุถุฉ</h1>
    <h2>ุงูุฃูุงุฏูููุฉ ุงูุฌูููุฉ ููุชุฑุจูุฉ ูุงูุชูููู: ูุฑุงูุด ุขุณูู</h2>
    <h2>ุงููุฏูุฑูุฉ ุงูุฅูููููุฉ: ุงูููุณููุฉ</h2>
  </div>
  <h3>ุดูุงูุฉ ุงูุญุตูู ุนูู ุงูููุญุฉ ุงูุฏุฑุงุณูุฉ<br>ููููุณู ุงูุฏุฑุงุณู 2025-2026</h3>
  <form id="complaintForm" novalidate>
    <h3 style="margin-top: 25px;">ูุนุทูุงุช ุงูุชูููุฐ(ุฉ)</h3>
    <div class="form-row">
      <div class="form-group">
        <label for="studentFirstName">ุงูุงุณู:</label>
        <input type="text" id="studentFirstName" name="studentFirstName" required />
      </div>
      <div class="form-group">
        <label for="studentLastName">ุงููุณุจ:</label>
        <input type="text" id="studentLastName" name="studentLastName" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="massar">ุฑูู ูุณุงุฑ:</label>
        <input type="text" id="massar" name="massar" required pattern="[A-Za-z][0-9]{9}" placeholder="ูุซุงู: G123456789" />
      </div>
      <div class="form-group">
        <label for="birthDatePlace">ุชุงุฑูุฎ ูููุงู ุงูุงุฒุฏูุงุฏ:</label>
        <input type="text" id="birthDatePlace" name="birthDatePlace" required placeholder="ูุซุงู: 01/01/2010 - ุงูููุณููุฉ" />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group" style="flex: 1 1 100%;">
        <label for="familyAddress">ุงูุนููุงู ุงูุนุงุฆูู:</label>
        <input type="text" id="familyAddress" name="familyAddress" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="originalSchool">ุงููุคุณุณุฉ ุงูุฃุตููุฉ:</label>
        <input type="text" id="originalSchool" name="originalSchool" required />
      </div>
      <div class="form-group">
        <label for="originalCommune">ุงูุฌูุงุนุฉ (ุงูุฃุตููุฉ):</label>
        <input type="text" id="originalCommune" name="originalCommune" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="receptionSchool">ูุคุณุณุฉ ุงูุงุณุชูุจุงู:</label>
        <input type="text" id="receptionSchool" name="receptionSchool" required />
      </div>
      <div class="form-group">
        <label for="receptionCommune">ุงูุฌูุงุนุฉ (ุงูุงุณุชูุจุงู):</label>
        <input type="text" id="receptionCommune" name="receptionCommune" required />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="distanceKm">ุงููุณุงูุฉ ุจูู ูุคุณุณุฉ ุงูุงุณุชูุจุงู ูุนููุงู ุงูุณูู (ูู):</label>
        <input type="number" id="distanceKm" name="distanceKm" step="0.1" min="0" required />
      </div>
      <div class="form-group">
        <label for="civilSocialId">ุงููุคุดุฑ ุงูุงุฌุชูุงุนู ููุฃุณุฑุฉ:</label>
        <input type="text" id="civilSocialId" name="civilSocialId" required placeholder="ูุซุงู: 8.15" />
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="healthStatus">ุงูุญุงูุฉ ุงูุตุญูุฉ:</label>
        <select id="healthStatus" name="healthStatus" required>
          <option value="">-- ุงุฎุชุฑ --</option>
          <option value="ุนุงุฏูุฉ">ุญุงูุฉ ุนุงุฏูุฉ</option>
          <option value="ุฅุนุงูุฉ">ูุฌูุฏ ุฅุนุงูุฉ</option>
          <option value="ูุฑุถ ูุฒูู">ูุฑุถ ูุฒูู</option>
        </select>
      </div>
      <div class="form-group">
        <label for="socialStatus">ุงููุถุนูุฉ ุงูุงุฌุชูุงุนูุฉ:</label>
        <select id="socialStatus" name="socialStatus" required>
          <option value="">-- ุงุฎุชุฑ --</option>
          <option value="ุนุงุฏูุฉ">ูุถุนูุฉ ุนุงุฏูุฉ</option>
          <option value="ูุชูู">ูุชูู</option>
          <option value="ูุชุฎูู ุนูู">ูุชุฎูู ุนูู</option>
          <option value="ููููู ุงูุฃูุฉ">ูููููู ุงูุฃูุฉ</option>
          <option value="ุทูุงู"> ุทูุงู</option>
          <option value=" ุณุฌู ุฃุญุฏ ุงูุฃุจููู"> ุณุฌู ุฃุญุฏ ุงูุฃุจููู</option>
        </select>
      </div>
    </div>

    <h3 style="margin-top: 25px;">ูุนุทูุงุช ููู ุงูุชูููุฐ(ุฉ)</h3>

    <div class="form-row">
      <div class="form-group">
        <label for="guardianFirstName">ุงูุงุณู (ููู ุงูุฃูุฑ):</label>
        <input type="text" id="guardianFirstName" name="guardianFirstName" required />
      </div>
      <div class="form-group">
        <label for="guardianLastName">ุงููุณุจ (ููู ุงูุฃูุฑ):</label>
        <input type="text" id="guardianLastName" name="guardianLastName" required />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="guardianCNINumber">ุฑูู ุงูุจุทุงูุฉ ุงููุทููุฉ (ููู ุงูุฃูุฑ):</label>
        <input type="text" id="guardianCNINumber" name="guardianCNINumber" required pattern="[A-Za-z]{2}[0-9]{6}" placeholder="ูุซุงู: HA123456" />
      </div>
      <div class="form-group">
        <label for="guardianJob">ุงููููุฉ:</label>
        <input type="text" id="guardianJob" name="guardianJob" required />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="guardianPhone">ุฑูู ุงููุงุชู:</label>
        <input type="tel" id="guardianPhone" name="guardianPhone" required pattern="0[0-9]{9}" placeholder="ูุซุงู: 0612345678" />
      </div>
      <div class="form-group">
        <label for="spouseName">ุงุณู ุงูุฒูุฌ(ุฉ):</label>
        <input type="text" id="spouseName" name="spouseName" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="spouseLastName">ูุณุจ ุงูุฒูุฌ(ุฉ):</label>
        <input type="text" id="spouseLastName" name="spouseLastName" />
      </div>
      <div class="form-group">
        <label for="spouseCNINumber">ุฑูู ุงูุจุทุงูุฉ ุงููุทููุฉ ููุฒูุฌ(ุฉ):</label>
        <input type="text" id="spouseCNINumber" name="spouseCNINumber" pattern="[A-Za-z]{2}[0-9]{6}" placeholder="ูุซุงู: HA123456" />
      </div>
    </div>

    <div class="form-footer">
      <button type="submit" class="submit-button">ุชุณุฌูู ูุทุจุงุนุฉ ุงูุดูุงูุฉ</button>
    </div>
  </form>
<!-- ุงุณุชูุงุฑุชู -->
<form id="grantForm">
  <!-- ุงูุญููู ููุง -->
</form>

<!-- ุงูููุงุญุธุฉ ุฃุณูู ุงูุงุณุชูุงุฑุฉ -->
<div class="alert-box">
  <strong>๐ ููุงุญุธุฉ ูุงูุฉ:</strong><br>
  ููุฑูู ูุฐุง ุงูุทูุจ ุจูุณุฎุฉ ูู ุจุทุงูุฉ ุงูุชุนุฑูู ุงููุทููุฉ ูููู ุฃูุฑ ุงูุชูููุฐ(ุฉ)ุ 
  ููุซููุฉ ุชูุซุจุช ุงููุคุดุฑ ุงูุงุฌุชูุงุนู ููุฃุณุฑุฉุ 
  ุจุงูุฅุถุงูุฉ ุฅูู ูุซููุฉ ุชุชุถูู ุฑูุฒ ูุณุงุฑ ุงูุชูููุฐ(ุฉ).
</div>

<style>
.alert-box {
  direction: rtl;
  background-color: #fff8e1;
  border: 1px solid #ffc107;
  color: #795548;
  padding: 15px;
  border-radius: 8px;
  font-size: 16px;
  margin-top: 30px;
  margin-bottom: 40px;
  box-shadow: 0 0 10px rgba(0,0,0,0.05);
  line-height: 1.6;
}
</style>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBbM9-Bd_ct6nqGnRBsLp2M08ze9n4tLbo",
      authDomain: "bourses-b1948.firebaseapp.com",
      projectId: "bourses-b1948",
      storageBucket: "bourses-b1948.firebasestorage.app",
      messagingSenderId: "639203393196",
      appId: "1:639203393196:web:05aa16c19762053d18a909",
      measurementId: "G-7SNG6QZ000"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById('complaintForm');

    function printCard(data) {
      const printWindow = window.open('', '', 'width=450,height=700');
      const content = `
      <html lang="ar" dir="rtl">
      <head>
        <meta charset="UTF-8" />
        <title>ุจุทุงูุฉ ุดูุงูุฉ ุงูููุญุฉ ุงูุฏุฑุงุณูุฉ</title>
        <style>
          @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
          body {
            font-family: 'Amiri', serif;
            direction: rtl;
            background: #fff;
            margin: 20px;
            padding: 10px;
            color: #333;
          }
          h1, h2 {
            text-align: center;
            margin: 0;
            padding: 2px 0;
            font-size: 8px; /* ุญุฌู ุฃุตุบุฑ */
            line-height: 1.1;
          }
          h3 {
            text-align: center;
            margin: 15px 0;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
          }
          table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 14px;
          }
          td {
            border: 1px solid #999;
            padding: 8px 10px;
            vertical-align: top;
          }
          td.label {
            width: 40%;
            background-color: #f0f0f5;
            font-weight: bold;
            text-align: right;
            direction: rtl;
          }
          td.value {
            width: 60%;
            text-align: right;
            direction: rtl;
          }
          .signature {
            margin-top: 40px;
            text-align: left;
            font-size: 14px;
          }

        
        </style>
      </head>
      <body>
        <h1>ูุฒุงุฑุฉ ุงูุชุฑุจูุฉ ุงููุทููุฉ ูุงูุชุนููู ุงูุฃููู ูุงูุฑูุงุถุฉ</h1>
        <h2>ุงูุฃูุงุฏูููุฉ ุงูุฌูููุฉ ููุชุฑุจูุฉ ูุงูุชูููู: ูุฑุงูุด ุขุณูู</h2>
        <h2>ุงููุฏูุฑูุฉ ุงูุฅูููููุฉ: ุงูููุณููุฉ</h2>
        <h3>ุดูุงูุฉ ุงูุญุตูู ุนูู ุงูููุญุฉ ุงูุฏุฑุงุณูุฉ ููููุณู ุงูุฏุฑุงุณู 2025-2026</h3>

        <table>
  <tr><td class="label" colspan="2" style="background:#ddd; text-align:center; font-weight:bold;">ูุนุทูุงุช ุงูุชูููุฐ(ุฉ)</td></tr>
  <tr><td class="label">ุงูุงุณู ูุงููุณุจ (ุงูุชูููุฐ):</td><td class="value">${data.studentFirstName} ${data.studentLastName}</td></tr>
  <tr><td class="label">ุฑูู ูุณุงุฑ:</td><td class="value">${data.massar}</td></tr>
  <tr><td class="label">ุชุงุฑูุฎ ูููุงู ุงูุงุฒุฏูุงุฏ:</td><td class="value">${data.birthDatePlace}</td></tr>
  <tr><td class="label">ุงูุนููุงู ุงูุนุงุฆูู:</td><td class="value">${data.familyAddress}</td></tr>
  <tr><td class="label">ุงููุคุณุณุฉ ุงูุฃุตููุฉ:</td><td class="value">${data.originalSchool}</td></tr>
  <tr><td class="label">ุงูุฌูุงุนุฉ (ุงูุฃุตููุฉ):</td><td class="value">${data.originalCommune}</td></tr>
  <tr><td class="label">ูุคุณุณุฉ ุงูุงุณุชูุจุงู:</td><td class="value">${data.receptionSchool}</td></tr>
  <tr><td class="label">ุงูุฌูุงุนุฉ (ุงูุงุณุชูุจุงู):</td><td class="value">${data.receptionCommune}</td></tr>
  <tr><td class="label">ุงููุณุงูุฉ ุจูู ูุคุณุณุฉ ุงูุงุณุชูุจุงู ูุนููุงู ุงูุณูู (ูู):</td><td class="value">${data.distanceKm}</td></tr>
  <tr><td class="label">ุงููุคุดุฑ ุงูุงุฌุชูุงุนู ููุฃุณุฑุฉ:</td><td class="value">${data.civilSocialId}</td></tr>
  <tr><td class="label">ุงูุญุงูุฉ ุงูุตุญูุฉ:</td><td class="value">${data.healthStatus}</td></tr>
  <tr><td class="label">ุงููุถุนูุฉ ุงูุงุฌุชูุงุนูุฉ:</td><td class="value">${data.socialStatus}</td></tr>

  <tr><td class="label" colspan="2" style="background:#ddd; text-align:center; font-weight:bold;">ูุนุทูุงุช ููู ุงูุชูููุฐ(ุฉ)</td></tr>

  <tr><td class="label">ุงูุงุณู ูุงููุณุจ (ููู ุงูุฃูุฑ):</td><td class="value">${data.guardianFirstName} ${data.guardianLastName}</td></tr>
  <tr><td class="label">ุฑูู ุงูุจุทุงูุฉ ุงููุทููุฉ (ููู ุงูุฃูุฑ):</td><td class="value">${data.guardianCNINumber}</td></tr>
  <tr><td class="label">ุงููููุฉ:</td><td class="value">${data.guardianJob}</td></tr>
  <tr><td class="label">ุฑูู ุงููุงุชู:</td><td class="value">${data.guardianPhone}</td></tr>
  <tr><td class="label">ุงุณู ุงูุฒูุฌ(ุฉ):</td><td class="value">${data.spouseName || '-'}</td></tr>
  <tr><td class="label">ูุณุจ ุงูุฒูุฌ(ุฉ):</td><td class="value">${data.spouseLastName || '-'}</td></tr>
  <tr><td class="label">ุฑูู ุงูุจุทุงูุฉ ุงููุทููุฉ ููุฒูุฌ(ุฉ):</td><td class="value">${data.spouseCNINumber || '-'}</td></tr>
</table>
        <div class="signature">
          <div>ุงูุชูููุน:</div>
          <br><br>
        </div>
      </body>
      </html>
      `;

      printWindow.document.write(content);
      printWindow.document.close();

      setTimeout(() => {
        printWindow.focus();
        printWindow.print();
        printWindow.close();
      }, 500);
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const formData = {
        studentFirstName: form.studentFirstName.value.trim(),
        studentLastName: form.studentLastName.value.trim(),
        massar: form.massar.value.trim(),
        birthDatePlace: form.birthDatePlace.value.trim(),
        familyAddress: form.familyAddress.value.trim(),
        originalSchool: form.originalSchool.value.trim(),
        originalCommune: form.originalCommune.value.trim(),
        receptionSchool: form.receptionSchool.value.trim(),
        receptionCommune: form.receptionCommune.value.trim(),
        distanceKm: parseFloat(form.distanceKm.value),
        civilSocialId: form.civilSocialId.value.trim(),
        guardianFirstName: form.guardianFirstName.value.trim(),
        guardianLastName: form.guardianLastName.value.trim(),
        guardianCNINumber: form.guardianCNINumber.value.trim(),
        guardianJob: form.guardianJob.value.trim(),
        guardianPhone: form.guardianPhone.value.trim(),
        spouseName: form.spouseName.value.trim(),
        spouseLastName: form.spouseLastName.value.trim(),
        spouseCNINumber: form.spouseCNINumber.value.trim(),
        healthStatus: form.healthStatus.value,
        socialStatus: form.socialStatus.value,
        timestamp: new Date().toISOString()
      };

      try {
        await addDoc(collection(db, "scholarshipComplaints"), formData);
        alert("ุชู ุชุณุฌูู ุงูุดูุงูุฉ ุจูุฌุงุญ!");

        printCard(formData);
        form.reset();

      } catch (error) {
        alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุณุฌูู: " + error.message);
        console.error(error);
      }
    });
  </script>
</body>
</html>
